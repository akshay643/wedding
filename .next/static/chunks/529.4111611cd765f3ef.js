"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{1529:function(e,r,t){t.r(r),t.d(r,{default:function(){return NgrokPWAFix}});var o=t(5893),i=t(7294);function NgrokPWAFix(){let[e,r]=(0,i.useState)(!1),[t,n]=(0,i.useState)(""),[s,a]=(0,i.useState)("checking"),[c,l]=(0,i.useState)("checking");(0,i.useEffect)(()=>{let e=window.location.hostname,t=e.includes(".ngrok.io")||e.includes(".ngrok-free.app");r(t),n(window.location.origin),t&&(console.log("\uD83D\uDD17 Ngrok tunnel detected:",window.location.origin),fixNgrokPWA())},[]);let fixNgrokPWA=async()=>{try{await checkManifest(),await registerServiceWorkerForNgrok(),await triggerInstallPrompt()}catch(e){console.error("Error fixing ngrok PWA:",e)}},checkManifest=async()=>{try{let e=await fetch("/manifest.json");if(e.ok){let r=await e.json();console.log("✅ Manifest loaded for ngrok:",r),l("loaded")}else l("failed")}catch(e){console.error("Manifest error:",e),l("failed")}},registerServiceWorkerForNgrok=async()=>{if("serviceWorker"in navigator)try{let e=await navigator.serviceWorker.getRegistrations();for(let r of e)await r.unregister();let r=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});console.log("✅ Service Worker registered for ngrok:",r),a("registered"),await navigator.serviceWorker.ready,console.log("✅ Service Worker ready for ngrok")}catch(e){console.error("❌ Service Worker registration failed:",e),a("failed")}else a("unsupported")},triggerInstallPrompt=()=>{setTimeout(()=>{console.log("\uD83D\uDD04 Checking for install prompt on ngrok..."),window.dispatchEvent(new Event("pwa-check-install"))},2e3)};return e?(0,o.jsxs)("div",{className:"fixed bottom-4 right-4 bg-blue-100 border border-blue-300 rounded-lg p-4 shadow-lg z-50 max-w-sm",children:[(0,o.jsxs)("div",{className:"flex items-center mb-2",children:[(0,o.jsx)("span",{className:"text-lg mr-2",children:"\uD83D\uDD17"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-bold text-blue-800",children:"Ngrok PWA Mode"}),(0,o.jsx)("div",{className:"text-xs text-blue-600",children:"PWA optimized for tunnel"})]})]}),(0,o.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Tunnel:"})," ",t.replace("https://","")]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"SW Status:"}),"checking"===s&&" \uD83D\uDD04 Checking...","registered"===s&&" ✅ Registered","failed"===s&&" ❌ Failed","unsupported"===s&&" ❌ Unsupported"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Manifest:"}),"checking"===c&&" \uD83D\uDD04 Checking...","loaded"===c&&" ✅ Loaded","failed"===c&&" ❌ Failed"]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[(0,o.jsx)("button",{onClick:()=>{let r=[{name:"HTTPS",check:()=>"https:"===window.location.protocol,result:"https:"===window.location.protocol?"✅":"❌"},{name:"Service Worker",check:()=>"serviceWorker"in navigator,result:"serviceWorker"in navigator?"✅":"❌"},{name:"Manifest",check:()=>document.querySelector('link[rel="manifest"]'),result:document.querySelector('link[rel="manifest"]')?"✅":"❌"},{name:"Ngrok Tunnel",check:()=>e,result:e?"✅":"❌"}],o=r.map(e=>"".concat(e.result," ").concat(e.name)).join("\n");alert("Ngrok PWA Test Results:\n\n".concat(o,"\n\nURL: ").concat(t))},className:"bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600",children:"Test PWA"}),(0,o.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t),alert("\uD83D\uDCCB Ngrok URL copied to clipboard:\n".concat(t))},className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600",children:"Copy URL"}),(0,o.jsx)("button",{onClick:fixNgrokPWA,className:"col-span-2 bg-purple-500 text-white px-2 py-1 rounded text-xs hover:bg-purple-600",children:"\uD83D\uDD27 Re-initialize PWA"})]}),(0,o.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:[(0,o.jsx)("strong",{children:"Mobile Testing:"}),(0,o.jsx)("br",{}),"Share this URL with mobile devices for PWA testing"]})]}):null}}}]);