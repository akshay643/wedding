"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{3895:function(e,t,l){l.r(t),l.d(t,{default:function(){return ForceInstallPWA}});var n=l(5893),s=l(7294);function ForceInstallPWA(){let[e,t]=(0,s.useState)(null),[l,o]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!1),[i,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(()=>{let e=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");a(e)})();let handleBeforeInstallPrompt=e=>{console.log("\uD83D\uDCF1 beforeinstallprompt event captured!"),e.preventDefault(),t(e),o(!0)},handleAppInstalled=e=>{console.log("\uD83C\uDF89 PWA was installed successfully!"),a(!0),o(!1),t(null)};return window.addEventListener("beforeinstallprompt",handleBeforeInstallPrompt),window.addEventListener("appinstalled",handleAppInstalled),setTimeout(()=>{e||r||(console.log("⚠️ Install prompt not triggered automatically"),d(!0))},3e3),()=>{window.removeEventListener("beforeinstallprompt",handleBeforeInstallPrompt),window.removeEventListener("appinstalled",handleAppInstalled)}},[]);let handleInstallClick=async()=>{if(!e){alert("Install prompt not available. Try the manual methods below.");return}try{await e.prompt();let{outcome:l}=await e.userChoice;console.log("User response: ".concat(l)),"accepted"===l?console.log("\uD83C\uDF89 User accepted the install prompt"):console.log("\uD83D\uDE14 User dismissed the install prompt"),t(null),o(!1)}catch(e){console.error("Error during installation:",e)}};return r?(0,n.jsx)("div",{className:"fixed top-4 right-4 bg-green-100 border border-green-300 text-green-800 p-4 rounded-lg shadow-lg z-50",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"text-lg mr-2",children:"✅"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-bold",children:"PWA Installed!"}),(0,n.jsx)("div",{className:"text-sm",children:"App is running in standalone mode"})]})]})}):(0,n.jsxs)("div",{className:"fixed top-4 right-4 bg-white border border-gray-300 rounded-lg p-4 shadow-lg z-50 max-w-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,n.jsx)("h3",{className:"font-bold text-purple-600",children:"\uD83D\uDCF1 Install PWA"}),(0,n.jsx)("button",{onClick:()=>d(!i),className:"text-xs text-gray-500 hover:text-gray-700",children:i?"Hide":"Debug"})]}),l?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("div",{className:"text-green-600 text-sm font-semibold",children:"✅ Ready to install!"}),(0,n.jsx)("button",{onClick:handleInstallClick,className:"w-full bg-purple-600 text-white py-2 px-4 rounded font-semibold hover:bg-purple-700 transition-colors",children:"\uD83D\uDCF1 Install Wedding App"})]}):(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("div",{className:"text-orange-600 text-sm",children:"⏳ Install prompt not available yet"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"Try these methods:"}),(0,n.jsx)("button",{onClick:()=>{alert('Chrome DevTools Method:\n\n1. Press F12 (or right-click → Inspect)\n2. Go to Application tab\n3. Click "Manifest" in left sidebar\n4. Scroll down to "Add to Home Screen"\n5. Click the button\n\nThis usually works even when auto-prompt doesn\'t!')},className:"w-full text-left bg-blue-50 hover:bg-blue-100 p-2 rounded text-xs border",children:"\uD83D\uDD27 Chrome DevTools Method"}),(0,n.jsx)("button",{onClick:()=>{alert('Manual Install (Chrome):\n\n1. Click the ⋮ menu (top right)\n2. Look for "Install Wedding App"\n3. Or try "More tools" → "Create shortcut"\n4. Check "Open as window"\n\nNote: Option may not appear until you\'ve visited multiple times')},className:"w-full text-left bg-gray-50 hover:bg-gray-100 p-2 rounded text-xs border",children:"\uD83D\uDCCB Chrome Menu Method"}),(0,n.jsx)("button",{onClick:()=>{let e={"HTTPS or localhost":"https:"===location.protocol||"localhost"===location.hostname,"Service Worker":"serviceWorker"in navigator,"Web App Manifest":null!==document.querySelector('link[rel="manifest"]'),"Valid manifest":!0,"Not already installed":!r,"Supported browser":/Chrome|Edge/.test(navigator.userAgent)};console.log("PWA Requirements Check:",e);let t=Object.entries(e).filter(e=>{let[t,l]=e;return!l});t.length>0?alert("❌ PWA Requirements not met:\n".concat(t.map(e=>{let[t]=e;return"• ".concat(t)}).join("\n"))):alert("✅ All PWA requirements are met!\n\nIf install prompt still doesn't appear, try:\n• Visit the site multiple times\n• Clear browser data\n• Use Chrome DevTools method")},className:"w-full text-left bg-yellow-50 hover:bg-yellow-100 p-2 rounded text-xs border",children:"✅ Check PWA Requirements"})]})]}),i&&(0,n.jsxs)("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs space-y-1",children:[(0,n.jsx)("div",{children:(0,n.jsx)("strong",{children:"Debug Info:"})}),(0,n.jsxs)("div",{children:["Protocol: ",location.protocol]}),(0,n.jsxs)("div",{children:["Host: ",location.hostname]}),(0,n.jsxs)("div",{children:["Browser: ",navigator.userAgent.includes("Chrome")?"Chrome":"Other"]}),(0,n.jsxs)("div",{children:["SW Support: ","serviceWorker"in navigator?"Yes":"No"]}),(0,n.jsxs)("div",{children:["Install Event: ",e?"Available":"None"]}),(0,n.jsxs)("div",{children:["Standalone: ",window.matchMedia("(display-mode: standalone)").matches?"Yes":"No"]})]})]})}}}]);