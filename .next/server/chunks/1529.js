"use strict";exports.id=1529,exports.ids=[1529],exports.modules={1529:(e,r,t)=>{t.r(r),t.d(r,{default:()=>NgrokPWAFix});var i=t(997),o=t(6689);function NgrokPWAFix(){let[e,r]=(0,o.useState)(!1),[t,s]=(0,o.useState)(""),[n,l]=(0,o.useState)("checking"),[a,c]=(0,o.useState)("checking");(0,o.useEffect)(()=>{let e=window.location.hostname,t=e.includes(".ngrok.io")||e.includes(".ngrok-free.app");r(t),s(window.location.origin),t&&(console.log("\uD83D\uDD17 Ngrok tunnel detected:",window.location.origin),fixNgrokPWA())},[]);let fixNgrokPWA=async()=>{try{await checkManifest(),await registerServiceWorkerForNgrok(),await triggerInstallPrompt()}catch(e){console.error("Error fixing ngrok PWA:",e)}},checkManifest=async()=>{try{let e=await fetch("/manifest.json");if(e.ok){let r=await e.json();console.log("âœ… Manifest loaded for ngrok:",r),c("loaded")}else c("failed")}catch(e){console.error("Manifest error:",e),c("failed")}},registerServiceWorkerForNgrok=async()=>{if("serviceWorker"in navigator)try{let e=await navigator.serviceWorker.getRegistrations();for(let r of e)await r.unregister();let r=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});console.log("âœ… Service Worker registered for ngrok:",r),l("registered"),await navigator.serviceWorker.ready,console.log("âœ… Service Worker ready for ngrok")}catch(e){console.error("âŒ Service Worker registration failed:",e),l("failed")}else l("unsupported")},triggerInstallPrompt=()=>{setTimeout(()=>{console.log("\uD83D\uDD04 Checking for install prompt on ngrok..."),window.dispatchEvent(new Event("pwa-check-install"))},2e3)};return e?(0,i.jsxs)("div",{className:"fixed bottom-4 right-4 bg-blue-100 border border-blue-300 rounded-lg p-4 shadow-lg z-50 max-w-sm",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[i.jsx("span",{className:"text-lg mr-2",children:"\uD83D\uDD17"}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-bold text-blue-800",children:"Ngrok PWA Mode"}),i.jsx("div",{className:"text-xs text-blue-600",children:"PWA optimized for tunnel"})]})]}),(0,i.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Tunnel:"})," ",t.replace("https://","")]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"SW Status:"}),"checking"===n&&" \uD83D\uDD04 Checking...","registered"===n&&" âœ… Registered","failed"===n&&" âŒ Failed","unsupported"===n&&" âŒ Unsupported"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Manifest:"}),"checking"===a&&" \uD83D\uDD04 Checking...","loaded"===a&&" âœ… Loaded","failed"===a&&" âŒ Failed"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsx("button",{onClick:()=>{let r=[{name:"HTTPS",check:()=>"https:"===window.location.protocol,result:"https:"===window.location.protocol?"âœ…":"âŒ"},{name:"Service Worker",check:()=>"serviceWorker"in navigator,result:"serviceWorker"in navigator?"âœ…":"âŒ"},{name:"Manifest",check:()=>document.querySelector('link[rel="manifest"]'),result:document.querySelector('link[rel="manifest"]')?"âœ…":"âŒ"},{name:"Ngrok Tunnel",check:()=>e,result:e?"âœ…":"âŒ"}],i=r.map(e=>`${e.result} ${e.name}`).join("\n");alert(`Ngrok PWA Test Results:

${i}

URL: ${t}`)},className:"bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600",children:"Test PWA"}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t),alert(`ðŸ“‹ Ngrok URL copied to clipboard:
${t}`)},className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600",children:"Copy URL"}),i.jsx("button",{onClick:fixNgrokPWA,className:"col-span-2 bg-purple-500 text-white px-2 py-1 rounded text-xs hover:bg-purple-600",children:"\uD83D\uDD27 Re-initialize PWA"})]}),(0,i.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:[i.jsx("strong",{children:"Mobile Testing:"}),i.jsx("br",{}),"Share this URL with mobile devices for PWA testing"]})]}):null}}};